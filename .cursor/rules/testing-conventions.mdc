---
description: Testing conventions và standards theo user rules
globs: ["test/**/*.dart", "**/*_test.dart"]
alwaysApply: false
---

# Testing Conventions

## Quy tắc chung
- Luôn phản hồi bằng **tiếng Việt**
- Tìm các file test tương tự để học theo pattern

## Test cho Utils / Extension / Helper
- Dùng `group` để nhóm các test cases
- Dùng `test` cho từng test case riêng lệ
- Tìm các file test tương tự trong `test/unit_test/common/` để học theo

```dart
group('UtilityName', () {
  test('should return expected result when valid input', () {
    // Arrange
    // Act  
    // Assert
  });
});
```

## Test cho StateNotifier (file có đuôi *notifier.dart)
- Dùng `group` và `stateNotifierTest`
- Search các test Notifier khác để viết theo
- Pattern: `test/unit_test/ui/page/{feature}/`

```dart
group('FeatureNotifier', () {
  stateNotifierTest<FeatureNotifier, FeatureState>(
    'should emit correct states when action performed',
    // Test implementation
  );
});
```

## Test cho Page / Screen
- Luôn có `golden test` sử dụng `testGoldens`
- Search các test page khác để học theo setup
- Pattern: `test/widget_test/ui/page/{feature}/`

```dart
group('FeaturePage', () {
  testGoldens('should match golden file', (tester) async {
    // Widget test với golden comparison
  });
});
```

## Cấu trúc file test
- Nếu file đã có sẵn thì dựa vào ngữ cảnh file trên để viết
- Maintain consistency với existing test patterns
- Sử dụng common test utilities trong `test/common/`